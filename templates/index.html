<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CourseConnect - Social Network per Corsisti</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --accent-color: #06b6d4;
            --bg-dark: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Contenimento globale per prevenire layout collapse */
        .container-fluid, .container, .row, .col, [class*="col-"] {
            overflow: hidden;
            word-wrap: break-word;
        }

        /* Glass Effect */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            word-wrap: break-word;
        }

        .glass-navbar {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        /* Header */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            padding: 4rem 0;
            text-align: center;
            background-size: 400% 400%;
            animation: gradientShift 6s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Navigation */
        .nav-pills .nav-link {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            border-radius: 15px;
        }

        .nav-pills .nav-link.active,
        .nav-pills .nav-link:hover {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }

        /* Forms */
        .form-control, .form-select {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 15px;
            padding: 0.75rem 1rem;
            backdrop-filter: blur(10px);
        }

        .form-control:focus, .form-select:focus {
            background: var(--glass-bg);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.25);
            color: var(--text-primary);
        }

        .form-control::placeholder {
            color: var(--text-secondary);
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: none;
            border-radius: 15px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .btn-outline-light {
            border-color: var(--glass-border);
            color: var(--text-secondary);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .btn-outline-light:hover {
            background: var(--glass-bg);
            border-color: var(--primary-color);
            color: var(--text-primary);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: none;
            border-radius: 15px;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
        }

        /* Posts */
        .post-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            word-wrap: break-word;
            transition: all 0.3s ease;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 1rem;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .post-content {
            margin: 1rem 0;
            line-height: 1.6;
            overflow: hidden;
            word-wrap: break-word;
        }

        .post-content img {
            max-width: 100% !important;
            width: auto !important;
            height: auto;
            border-radius: 15px;
            margin: 1rem 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            object-fit: cover;
        }

        .post-content video {
            max-width: 100% !important;
            width: 100%;
            height: auto;
            border-radius: 15px;
            margin: 1rem 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .post-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
            flex-wrap: wrap;
        }

        .action-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .action-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .action-btn.active {
            background: var(--accent-color);
            color: white;
        }

        /* Comments */
        .comments-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
            overflow: hidden;
            word-wrap: break-word;
        }

        .comment-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-left: 3px solid var(--primary-color);
            overflow: hidden;
            word-wrap: break-word;
        }

        .comment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            flex-wrap: wrap;
        }

        .comment-user {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .comment-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .comment-form {
            margin-top: 1rem;
        }

        .comment-input {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            border-radius: 10px;
            padding: 0.75rem;
            width: 100%;
            resize: vertical;
            min-height: 80px;
            max-height: 200px;
        }

        .comment-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.25);
        }

        /* File Upload */
        .file-upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            background: var(--glass-bg);
            transition: all 0.3s ease;
            margin: 1rem 0;
        }

        .file-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.1);
        }

        .file-upload-area.dragover {
            border-color: var(--accent-color);
            background: rgba(6, 182, 212, 0.1);
        }

        .file-preview {
            margin-top: 1rem;
            text-align: center;
        }

        .file-preview img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .file-preview video {
            max-width: 300px;
            max-height: 200px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Users Grid */
        .user-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            overflow: hidden;
            word-wrap: break-word;
        }

        .user-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .user-card .user-avatar {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            font-size: 1.2rem;
        }

        /* Reviews */
        .review-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            overflow: hidden;
            word-wrap: break-word;
        }

        .rating {
            color: #fbbf24;
            margin: 0.5rem 0;
        }

        /* Account Settings */
        .settings-section {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .danger-zone {
            border: 2px dashed #ef4444;
            border-radius: 15px;
            padding: 2rem;
            background: rgba(239, 68, 68, 0.1);
        }

        /* Modal customizations */
        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            backdrop-filter: blur(20px);
        }

        .modal-header {
            border-bottom: 1px solid var(--glass-border);
        }

        .modal-footer {
            border-top: 1px solid var(--glass-border);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .glass-card {
                padding: 1rem;
            }
            
            .post-card {
                padding: 1rem;
            }
            
            .post-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .nav-pills {
                flex-direction: column;
            }
            
            .nav-pills .nav-link {
                margin: 0.25rem 0;
            }
        }

        /* Utility classes */
        .text-gradient {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .overflow-hidden {
            overflow: hidden !important;
        }

        .word-wrap {
            word-wrap: break-word !important;
            overflow-wrap: break-word !important;
        }

        /* Hide scrollbars but keep functionality */
        .custom-scrollbar {
            scrollbar-width: thin;
            scrollbar-color: var(--glass-border) transparent;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: var(--glass-border);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg glass-navbar fixed-top">
        <div class="container">
            <a class="navbar-brand text-gradient fw-bold fs-3" href="#">
                <i class="bi bi-mortarboard-fill me-2"></i>CourseConnect
            </a>
            <div class="navbar-nav ms-auto">
                <div id="authButtons" class="d-flex gap-2">
                    <button class="btn btn-outline-light" onclick="showLogin()">
                        <i class="bi bi-box-arrow-in-right me-1"></i>Accedi
                    </button>
                    <button class="btn btn-primary" onclick="showRegister()">
                        <i class="bi bi-person-plus me-1"></i>Registrati
                    </button>
                </div>
                <div id="userMenu" class="d-none">
                    <div class="dropdown">
                        <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle me-1"></i><span id="currentUsername"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" onclick="showSettings()">
                                <i class="bi bi-gear me-2"></i>Impostazioni Account
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()">
                                <i class="bi bi-box-arrow-right me-2"></i>Logout
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">CourseConnect</h1>
            <p class="hero-subtitle">
                La piattaforma social dove i corsisti si incontrano, condividono esperienze
                e costruiscono la loro community di apprendimento
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container mt-5 pt-5">
        <!-- Navigation Tabs -->
        <ul class="nav nav-pills justify-content-center mb-5" id="mainTabs">
            <li class="nav-item">
                <button class="nav-link active" onclick="showSection('home')">
                    <i class="bi bi-house me-1"></i>Home
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showSection('users')">
                    <i class="bi bi-people me-1"></i>Community
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" onclick="showSection('reviews')">
                    <i class="bi bi-star me-1"></i>Recensioni
                </button>
            </li>
        </ul>

        <!-- Home Section -->
        <div id="homeSection" class="section">
            <!-- Create Post Form (Only for logged in users) -->
            <div id="createPostForm" class="glass-card mb-4 d-none">
                <h5 class="mb-3"><i class="bi bi-plus-circle me-2"></i>Condividi la tua esperienza</h5>
                <form id="postForm" enctype="multipart/form-data">
                    <div class="mb-3">
                        <textarea class="form-control" id="postContent" rows="4" 
                            placeholder="Cosa vuoi condividere oggi? Racconta la tua esperienza di studio, i progressi del corso, o fai una domanda alla community..."></textarea>
                    </div>
                    
                    <!-- File Upload Area -->
                    <div class="file-upload-area" id="fileUploadArea">
                        <i class="bi bi-cloud-upload fs-1 text-muted mb-2"></i>
                        <p class="mb-2">Trascina qui le tue immagini o video</p>
                        <p class="text-muted small mb-3">Oppure clicca per selezionare i file</p>
                        <input type="file" id="fileInput" accept="image/*,video/*" class="d-none">
                        <button type="button" class="btn btn-outline-light" onclick="document.getElementById('fileInput').click()">
                            <i class="bi bi-folder2-open me-1"></i>Scegli file
                        </button>
                        <div class="mt-2 text-muted small">
                            <i class="bi bi-info-circle me-1"></i>
                            Formati supportati: PNG, JPG, GIF, MP4, AVI, MOV (max 50MB)
                        </div>
                    </div>
                    
                    <!-- File Preview -->
                    <div id="filePreview" class="file-preview d-none"></div>
                    
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-muted small">
                            <i class="bi bi-lightbulb me-1"></i>
                            Condividi foto dei tuoi appunti, video delle tue presentazioni, o racconta i tuoi successi!
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-send me-1"></i>Pubblica
                        </button>
                    </div>
                </form>
            </div>

            <!-- Posts Feed -->
            <div id="postsContainer"></div>
        </div>

        <!-- Users Section -->
        <div id="usersSection" class="section d-none">
            <div class="glass-card">
                <h4 class="mb-4"><i class="bi bi-people me-2"></i>Community</h4>
                <div id="usersContainer" class="row"></div>
            </div>
        </div>

        <!-- Reviews Section -->
        <div id="reviewsSection" class="section d-none">
            <div class="glass-card">
                <h4 class="mb-4"><i class="bi bi-star me-2"></i>Recensioni Corsi</h4>
                
                <!-- Add Review Form (Only for logged in users) -->
                <div id="reviewForm" class="d-none mb-4">
                    <h5 class="mb-3">Aggiungi una recensione</h5>
                    <form id="addReviewForm">
                        <div class="mb-3">
                            <label class="form-label">Nome del corso</label>
                            <input type="text" class="form-control" id="reviewCourseName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Valutazione</label>
                            <select class="form-select" id="reviewRating" required>
                                <option value="">Seleziona valutazione</option>
                                <option value="5">⭐⭐⭐⭐⭐ (5 stelle)</option>
                                <option value="4">⭐⭐⭐⭐ (4 stelle)</option>
                                <option value="3">⭐⭐⭐ (3 stelle)</option>
                                <option value="2">⭐⭐ (2 stelle)</option>
                                <option value="1">⭐ (1 stella)</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Commento</label>
                            <textarea class="form-control" id="reviewComment" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-star me-1"></i>Pubblica Recensione
                        </button>
                    </form>
                </div>
                
                <div id="reviewsContainer"></div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-box-arrow-in-right me-2"></i>Accedi a CourseConnect
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-control" id="loginUsername" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="bi bi-box-arrow-in-right me-1"></i>Accedi
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-person-plus me-2"></i>Registrati su CourseConnect
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-control" id="registerUsername" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="registerEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="registerPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Bio (opzionale)</label>
                            <textarea class="form-control" id="registerBio" rows="2" 
                                placeholder="Raccontaci qualcosa di te..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Corso/Studi (opzionale)</label>
                            <input type="text" class="form-control" id="registerCourse" 
                                placeholder="Es: Informatica, Marketing, Design...">
                        </div>
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="bi bi-person-plus me-1"></i>Registrati
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Settings Modal -->
    <div class="modal fade" id="settingsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-gear me-2"></i>Impostazioni Account
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Account Info -->
                    <div class="settings-section">
                        <h6><i class="bi bi-person-circle me-2"></i>Informazioni Account</h6>
                        <div id="currentUserInfo"></div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="danger-zone">
                        <h6 class="text-danger"><i class="bi bi-exclamation-triangle me-2"></i>Zona Pericolosa</h6>
                        <p class="text-muted mb-3">
                            Una volta eliminato l'account, non potrai più recuperarlo. Tutti i tuoi post, commenti e like verranno eliminati permanentemente.
                        </p>
                        <button class="btn btn-danger" onclick="showDeleteAccountModal()">
                            <i class="bi bi-trash me-1"></i>Elimina Account
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Confirmation Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <h5 class="modal-title text-white">
                        <i class="bi bi-exclamation-triangle me-2"></i>Conferma Eliminazione Account
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger">
                        <strong>Attenzione!</strong> Questa azione è irreversibile. Tutti i tuoi dati verranno eliminati permanentemente.
                    </div>

                    <form id="deleteAccountForm">
                        <div class="mb-3">
                            <label class="form-label">Perché vuoi eliminare il tuo account?</label>
                            <select class="form-select" id="deletionReason" required>
                                <option value="">Seleziona un motivo</option>
                                <option value="Non uso più la piattaforma">Non uso più la piattaforma</option>
                                <option value="Privacy e sicurezza">Preoccupazioni per privacy e sicurezza</option>
                                <option value="Contenuti inappropriati">Troppi contenuti inappropriati</option>
                                <option value="Problemi tecnici">Problemi tecnici ricorrenti</option>
                                <option value="Alternative migliori">Ho trovato alternative migliori</option>
                                <option value="Altro">Altro motivo</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Feedback aggiuntivo (opzionale)</label>
                            <textarea class="form-control" id="deletionFeedback" rows="3" 
                                placeholder="Aiutaci a migliorare! Cosa potremmo fare diversamente?"></textarea>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="confirmDeletion" required>
                                <label class="form-check-label" for="confirmDeletion">
                                    Confermo di voler eliminare definitivamente il mio account e tutti i dati associati
                                </label>
                            </div>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-secondary flex-fill" data-bs-dismiss="modal">
                                Annulla
                            </button>
                            <button type="submit" class="btn btn-danger flex-fill">
                                <i class="bi bi-trash me-1"></i>Elimina Account
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Global variables
        let currentUser = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            loadPosts();
            loadUsers();
            loadReviews();
            setupEventListeners();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            // Register form
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            
            // Post form
            document.getElementById('postForm').addEventListener('submit', handleCreatePost);
            
            // Review form
            document.getElementById('addReviewForm').addEventListener('submit', handleAddReview);
            
            // Delete account form
            document.getElementById('deleteAccountForm').addEventListener('submit', handleDeleteAccount);
            
            // File input
            document.getElementById('fileInput').addEventListener('change', handleFileSelect);
            
            // Drag and drop
            const uploadArea = document.getElementById('fileUploadArea');
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleFileDrop);
        }

        // Authentication functions
        async function checkAuth() {
            try {
                const response = await fetch('/api/user/current');
                const data = await response.json();
                
                if (data.logged_in) {
                    currentUser = data.user;
                    updateUIForLoggedInUser();
                } else {
                    updateUIForLoggedOutUser();
                }
            } catch (error) {
                console.error('Error checking auth:', error);
                updateUIForLoggedOutUser();
            }
        }

        function updateUIForLoggedInUser() {
            document.getElementById('authButtons').classList.add('d-none');
            document.getElementById('userMenu').classList.remove('d-none');
            document.getElementById('currentUsername').textContent = currentUser.username;
            document.getElementById('createPostForm').classList.remove('d-none');
            document.getElementById('reviewForm').classList.remove('d-none');
        }

        function updateUIForLoggedOutUser() {
            document.getElementById('authButtons').classList.remove('d-none');
            document.getElementById('userMenu').classList.add('d-none');
            document.getElementById('createPostForm').classList.add('d-none');
            document.getElementById('reviewForm').classList.add('d-none');
            currentUser = null;
        }

        async function handleLogin(e) {
            e.preventDefault();
            
            const formData = {
                username: document.getElementById('loginUsername').value,
                password: document.getElementById('loginPassword').value
            };
            
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser = data.user;
                    updateUIForLoggedInUser();
                    bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide();
                    showAlert('Login effettuato con successo!', 'success');
                    loadPosts(); // Reload posts to show user-specific actions
                } else {
                    showAlert(data.error || 'Errore durante il login', 'danger');
                }
            } catch (error) {
                console.error('Login error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function handleRegister(e) {
            e.preventDefault();
            
            const formData = {
                username: document.getElementById('registerUsername').value,
                email: document.getElementById('registerEmail').value,
                password: document.getElementById('registerPassword').value,
                bio: document.getElementById('registerBio').value,
                course: document.getElementById('registerCourse').value
            };
            
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentUser = data.user;
                    updateUIForLoggedInUser();
                    bootstrap.Modal.getInstance(document.getElementById('registerModal')).hide();
                    showAlert('Registrazione completata con successo!', 'success');
                    loadPosts();
                } else {
                    showAlert(data.error || 'Errore durante la registrazione', 'danger');
                }
            } catch (error) {
                console.error('Register error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function logout() {
            try {
                await fetch('/api/logout', { method: 'POST' });
                updateUIForLoggedOutUser();
                showAlert('Logout effettuato con successo!', 'success');
                loadPosts(); // Reload posts to hide user-specific actions
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // Account deletion functions
        function showSettings() {
            if (!currentUser) return;
            
            document.getElementById('currentUserInfo').innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Username:</strong> ${currentUser.username}</p>
                        <p><strong>Email:</strong> ${currentUser.email}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Bio:</strong> ${currentUser.bio || 'Non specificata'}</p>
                        <p><strong>Corso:</strong> ${currentUser.course || 'Non specificato'}</p>
                    </div>
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('settingsModal')).show();
        }

        function showDeleteAccountModal() {
            bootstrap.Modal.getInstance(document.getElementById('settingsModal')).hide();
            new bootstrap.Modal(document.getElementById('deleteAccountModal')).show();
        }

        async function handleDeleteAccount(e) {
            e.preventDefault();
            
            const reason = document.getElementById('deletionReason').value;
            const feedback = document.getElementById('deletionFeedback').value;
            const confirmed = document.getElementById('confirmDeletion').checked;
            
            if (!confirmed) {
                showAlert('Devi confermare l\'eliminazione dell\'account', 'warning');
                return;
            }
            
            try {
                const response = await fetch('/api/delete-account', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ reason, feedback })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    bootstrap.Modal.getInstance(document.getElementById('deleteAccountModal')).hide();
                    updateUIForLoggedOutUser();
                    showAlert('Account eliminato con successo. Grazie per il feedback!', 'info');
                    loadPosts();
                    loadUsers();
                } else {
                    showAlert(data.error || 'Errore durante l\'eliminazione dell\'account', 'danger');
                }
            } catch (error) {
                console.error('Delete account error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        // File handling functions
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                showFilePreview(file);
            }
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
        }

        function handleFileDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('fileInput').files = files;
                showFilePreview(files[0]);
            }
        }

        function showFilePreview(file) {
            const preview = document.getElementById('filePreview');
            const fileType = file.type.split('/')[0];
            
            if (fileType === 'image') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <div class="d-flex align-items-center gap-3">
                            <img src="${e.target.result}" alt="Preview" style="max-width: 150px; max-height: 150px; border-radius: 10px;">
                            <div>
                                <p class="mb-1"><strong>${file.name}</strong></p>
                                <p class="text-muted small mb-0">${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                                <button type="button" class="btn btn-sm btn-outline-danger mt-2" onclick="clearFilePreview()">
                                    <i class="bi bi-trash"></i> Rimuovi
                                </button>
                            </div>
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            } else if (fileType === 'video') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <div class="d-flex align-items-center gap-3">
                            <video controls style="max-width: 200px; max-height: 150px; border-radius: 10px;">
                                <source src="${e.target.result}" type="${file.type}">
                                Il tuo browser non supporta il tag video.
                            </video>
                            <div>
                                <p class="mb-1"><strong>${file.name}</strong></p>
                                <p class="text-muted small mb-0">${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                                <button type="button" class="btn btn-sm btn-outline-danger mt-2" onclick="clearFilePreview()">
                                    <i class="bi bi-trash"></i> Rimuovi
                                </button>
                            </div>
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            }
            
            preview.classList.remove('d-none');
        }

        function clearFilePreview() {
            document.getElementById('filePreview').classList.add('d-none');
            document.getElementById('fileInput').value = '';
        }

        // Post functions
        async function handleCreatePost(e) {
            e.preventDefault();
            
            const content = document.getElementById('postContent').value.trim();
            const fileInput = document.getElementById('fileInput');
            
            if (!content) {
                showAlert('Il contenuto del post è richiesto', 'warning');
                return;
            }
            
            const formData = new FormData();
            formData.append('content', content);
            
            if (fileInput.files[0]) {
                formData.append('file', fileInput.files[0]);
            }
            
            try {
                const response = await fetch('/api/posts', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('postForm').reset();
                    clearFilePreview();
                    showAlert('Post pubblicato con successo!', 'success');
                    loadPosts();
                } else {
                    showAlert(data.error || 'Errore durante la pubblicazione', 'danger');
                }
            } catch (error) {
                console.error('Create post error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function loadPosts() {
            try {
                const response = await fetch('/api/posts');
                const data = await response.json();
                
                const container = document.getElementById('postsContainer');
                
                if (data.posts && data.posts.length > 0) {
                    container.innerHTML = data.posts.map(post => createPostHTML(post)).join('');
                } else {
                    container.innerHTML = `
                        <div class="glass-card text-center">
                            <i class="bi bi-chat-left-text fs-1 text-muted mb-3"></i>
                            <h5>Nessun post ancora</h5>
                            <p class="text-muted">Sii il primo a condividere qualcosa con la community!</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Load posts error:', error);
                showAlert('Errore nel caricamento dei post', 'danger');
            }
        }

        function createPostHTML(post) {
            const userInitial = post.username.charAt(0).toUpperCase();
            const postDate = new Date(post.created_at).toLocaleDateString('it-IT', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            let mediaHTML = '';
            if (post.image_filename) {
                mediaHTML = `<img src="/static/uploads/${post.image_filename}" alt="Post image" class="img-fluid">`;
            } else if (post.video_filename) {
                mediaHTML = `
                    <video controls class="img-fluid">
                        <source src="/static/uploads/${post.video_filename}" type="video/mp4">
                        Il tuo browser non supporta il tag video.
                    </video>
                `;
            }

            return `
                <div class="post-card fade-in">
                    <div class="post-header">
                        <div class="user-avatar">${userInitial}</div>
                        <div class="flex-grow-1">
                            <div class="fw-bold">${post.username}</div>
                            <div class="text-muted small">${postDate}</div>
                        </div>
                        ${post.user_can_delete ? `
                            <button class="btn btn-outline-danger btn-sm" onclick="deletePost(${post.id})">
                                <i class="bi bi-trash"></i>
                            </button>
                        ` : ''}
                    </div>
                    
                    <div class="post-content">
                        <p>${post.content.replace(/\n/g, '<br>')}</p>
                        ${mediaHTML}
                    </div>
                    
                    <div class="post-actions">
                        <button class="action-btn ${post.user_liked ? 'active' : ''}" onclick="toggleLike(${post.id})">
                            <i class="bi bi-heart${post.user_liked ? '-fill' : ''}"></i>
                            <span id="likes-count-${post.id}">${post.likes_count}</span>
                        </button>
                        
                        <button class="action-btn" onclick="toggleComments(${post.id})">
                            <i class="bi bi-chat-left"></i>
                            <span id="comments-count-${post.id}">${post.comments_count}</span> Commenti
                        </button>
                    </div>
                    
                    <div id="comments-section-${post.id}" class="comments-section d-none">
                        <div id="comments-list-${post.id}"></div>
                        
                        ${currentUser ? `
                            <div class="comment-form">
                                <div class="d-flex gap-2">
                                    <textarea class="comment-input" id="comment-input-${post.id}" 
                                        placeholder="Scrivi un commento..." maxlength="1000"></textarea>
                                    <button class="btn btn-primary" onclick="addComment(${post.id})">
                                        <i class="bi bi-send"></i>
                                    </button>
                                </div>
                            </div>
                        ` : `
                            <div class="text-center text-muted py-3">
                                <i class="bi bi-lock me-1"></i>
                                <a href="#" onclick="showLogin()" class="text-decoration-none">Accedi per commentare</a>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        async function deletePost(postId) {
            if (!confirm('Sei sicuro di voler eliminare questo post?')) return;
            
            try {
                const response = await fetch(`/api/posts/${postId}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showAlert('Post eliminato con successo', 'success');
                    loadPosts();
                } else {
                    showAlert(data.error || 'Errore durante l\'eliminazione', 'danger');
                }
            } catch (error) {
                console.error('Delete post error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function toggleLike(postId) {
            if (!currentUser) {
                showLogin();
                return;
            }
            
            try {
                const response = await fetch(`/api/posts/${postId}/like`, {
                    method: 'POST'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById(`likes-count-${postId}`).textContent = data.likes_count;
                    // Update button appearance
                    const likeBtn = document.querySelector(`button[onclick="toggleLike(${postId})"]`);
                    const icon = likeBtn.querySelector('i');
                    
                    if (data.action === 'added') {
                        likeBtn.classList.add('active');
                        icon.classList.remove('bi-heart');
                        icon.classList.add('bi-heart-fill');
                    } else {
                        likeBtn.classList.remove('active');
                        icon.classList.remove('bi-heart-fill');
                        icon.classList.add('bi-heart');
                    }
                } else {
                    showAlert(data.error || 'Errore durante l\'operazione', 'danger');
                }
            } catch (error) {
                console.error('Toggle like error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        // Comments functions
        async function toggleComments(postId) {
            const commentsSection = document.getElementById(`comments-section-${postId}`);
            
            if (commentsSection.classList.contains('d-none')) {
                commentsSection.classList.remove('d-none');
                await loadComments(postId);
            } else {
                commentsSection.classList.add('d-none');
            }
        }

        async function loadComments(postId) {
            try {
                const response = await fetch(`/api/posts/${postId}/comments`);
                const data = await response.json();
                
                const commentsList = document.getElementById(`comments-list-${postId}`);
                
                if (data.comments && data.comments.length > 0) {
                    commentsList.innerHTML = data.comments.map(comment => createCommentHTML(comment, postId)).join('');
                } else {
                    commentsList.innerHTML = `
                        <div class="text-center text-muted py-3">
                            <i class="bi bi-chat-left me-1"></i>
                            Nessun commento ancora. Sii il primo a commentare!
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Load comments error:', error);
            }
        }

        function createCommentHTML(comment, postId) {
            const userInitial = comment.username.charAt(0).toUpperCase();
            const commentDate = new Date(comment.created_at).toLocaleDateString('it-IT', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            return `
                <div class="comment-item" id="comment-${comment.id}">
                    <div class="comment-header">
                        <div class="comment-user">
                            <div class="comment-avatar">${userInitial}</div>
                            <span class="fw-bold">${comment.username}</span>
                            <span class="text-muted small ms-2">${commentDate}</span>
                        </div>
                        ${comment.user_can_delete ? `
                            <button class="btn btn-outline-danger btn-sm" onclick="deleteComment(${comment.id}, ${postId})">
                                <i class="bi bi-trash"></i>
                            </button>
                        ` : ''}
                    </div>
                    <div class="comment-content">
                        ${comment.content.replace(/\n/g, '<br>')}
                    </div>
                </div>
            `;
        }

        async function addComment(postId) {
            if (!currentUser) {
                showLogin();
                return;
            }
            
            const input = document.getElementById(`comment-input-${postId}`);
            const content = input.value.trim();
            
            if (!content) return;
            
            try {
                const response = await fetch(`/api/posts/${postId}/comments`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    input.value = '';
                    await loadComments(postId);
                    
                    // Update comments count
                    const currentCount = parseInt(document.getElementById(`comments-count-${postId}`).textContent);
                    document.getElementById(`comments-count-${postId}`).textContent = currentCount + 1;
                } else {
                    showAlert(data.error || 'Errore durante l\'invio del commento', 'danger');
                }
            } catch (error) {
                console.error('Add comment error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function deleteComment(commentId, postId) {
            if (!confirm('Sei sicuro di voler eliminare questo commento?')) return;
            
            try {
                const response = await fetch(`/api/comments/${commentId}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Remove comment from DOM with animation
                    const commentElement = document.getElementById(`comment-${commentId}`);
                    commentElement.style.transition = 'all 0.3s ease';
                    commentElement.style.transform = 'translateX(-100%)';
                    commentElement.style.opacity = '0';
                    
                    setTimeout(() => {
                        commentElement.remove();
                        
                        // Update comments count
                        const currentCount = parseInt(document.getElementById(`comments-count-${postId}`).textContent);
                        document.getElementById(`comments-count-${postId}`).textContent = Math.max(0, currentCount - 1);
                        
                        // Reload comments to show updated list
                        loadComments(postId);
                    }, 300);
                } else {
                    showAlert(data.error || 'Errore durante l\'eliminazione', 'danger');
                }
            } catch (error) {
                console.error('Delete comment error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        // Users functions
        async function loadUsers() {
            try {
                const response = await fetch('/api/users');
                const data = await response.json();
                
                const container = document.getElementById('usersContainer');
                
                if (data.users && data.users.length > 0) {
                    container.innerHTML = data.users.map(user => createUserHTML(user)).join('');
                } else {
                    container.innerHTML = `
                        <div class="col-12 text-center">
                            <div class="glass-card">
                                <i class="bi bi-people fs-1 text-muted mb-3"></i>
                                <h5>Nessun utente ancora</h5>
                                <p class="text-muted">La community sta crescendo!</p>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Load users error:', error);
            }
        }

        function createUserHTML(user) {
            const userInitial = user.username.charAt(0).toUpperCase();
            const joinDate = new Date(user.created_at).toLocaleDateString('it-IT', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            return `
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="user-card">
                        <div class="user-avatar">${userInitial}</div>
                        <h6 class="fw-bold">${user.username}</h6>
                        <p class="text-muted small mb-2">${user.bio || 'Nessuna bio'}</p>
                        <p class="text-muted small mb-2">
                            <i class="bi bi-book me-1"></i>${user.course || 'Corso non specificato'}
                        </p>
                        <div class="d-flex justify-content-between text-muted small">
                            <span><i class="bi bi-calendar me-1"></i>${joinDate}</span>
                            <span><i class="bi bi-chat-left me-1"></i>${user.posts_count} post</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Reviews functions
        async function handleAddReview(e) {
            e.preventDefault();
            
            const formData = {
                course_name: document.getElementById('reviewCourseName').value,
                rating: parseInt(document.getElementById('reviewRating').value),
                comment: document.getElementById('reviewComment').value
            };
            
            try {
                const response = await fetch('/api/reviews', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('addReviewForm').reset();
                    showAlert('Recensione pubblicata con successo!', 'success');
                    loadReviews();
                } else {
                    showAlert(data.error || 'Errore durante la pubblicazione', 'danger');
                }
            } catch (error) {
                console.error('Add review error:', error);
                showAlert('Errore di connessione', 'danger');
            }
        }

        async function loadReviews() {
            try {
                const response = await fetch('/api/reviews');
                const data = await response.json();
                
                const container = document.getElementById('reviewsContainer');
                
                if (data.reviews && data.reviews.length > 0) {
                    container.innerHTML = data.reviews.map(review => createReviewHTML(review)).join('');
                } else {
                    container.innerHTML = `
                        <div class="text-center">
                            <i class="bi bi-star fs-1 text-muted mb-3"></i>
                            <h5>Nessuna recensione ancora</h5>
                            <p class="text-muted">Condividi la tua esperienza con un corso!</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Load reviews error:', error);
            }
        }

        function createReviewHTML(review) {
            const stars = '⭐'.repeat(review.rating);
            const reviewDate = new Date(review.created_at).toLocaleDateString('it-IT', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            return `
                <div class="review-card">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <h6 class="fw-bold mb-0">${review.course_name}</h6>
                        <div class="rating">${stars}</div>
                    </div>
                    <p class="text-muted small mb-2">
                        di <strong>${review.username}</strong> • ${reviewDate}
                    </p>
                    ${review.comment ? `<p class="mb-0">${review.comment}</p>` : ''}
                </div>
            `;
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('d-none');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('d-none');
            
            // Update nav buttons
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            event.target.classList.add('active');
        }

        function showLogin() {
            new bootstrap.Modal(document.getElementById('loginModal')).show();
        }

        function showRegister() {
            new bootstrap.Modal(document.getElementById('registerModal')).show();
        }

        // Utility functions
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 350px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        // Initialize tooltips and popovers
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Bootstrap tooltips
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
</body>
</html>
